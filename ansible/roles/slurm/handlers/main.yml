---
- name: daemon reload
  systemd:
    daemon_reload: true

- name: restart slurmctld
  service:
    name: slurmctld
    state: restarted
  when: slurm_role == "slurm_ctrl"

- name: restart slurmd
  service:
    name: slurmd
    state: restarted
  when: slurm_role == "slurm_compute"

- name: restart slurmdbd
  service:
    name: slurmdbd
    state: restarted
    daemon_reload: true
  when: slurm_role == "slurm_dbd"
